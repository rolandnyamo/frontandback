import React, { useState } from 'react';\nimport {\n  Container,\n  Typography,\n  Box,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  Button,\n  Paper,\n  Tabs,\n  Tab,\n  TextField,\n  InputAdornment,\n  IconButton,\n  useTheme,\n} from '@mui/material';\nimport {\n  Flight,\n  Hotel,\n  DirectionsCar,\n  Restaurant,\n  Search,\n  LocationOn,\n  DateRange,\n  Person,\n  Star,\n  TrendingUp,\n  Security,\n  SupportAgent,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport dayjs, { Dayjs } from 'dayjs';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`search-tabpanel-${index}`}\n      aria-labelledby={`search-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst HomePage: React.FC = () => {\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const [tabValue, setTabValue] = useState(0);\n  \n  // Flight search state\n  const [flightOrigin, setFlightOrigin] = useState('');\n  const [flightDestination, setFlightDestination] = useState('');\n  const [departureDate, setDepartureDate] = useState<Dayjs | null>(dayjs().add(1, 'day'));\n  const [returnDate, setReturnDate] = useState<Dayjs | null>(dayjs().add(8, 'day'));\n  const [passengers, setPassengers] = useState(1);\n  \n  // Hotel search state\n  const [hotelDestination, setHotelDestination] = useState('');\n  const [checkIn, setCheckIn] = useState<Dayjs | null>(dayjs().add(1, 'day'));\n  const [checkOut, setCheckOut] = useState<Dayjs | null>(dayjs().add(3, 'day'));\n  const [guests, setGuests] = useState(2);\n  const [rooms, setRooms] = useState(1);\n  \n  // Car search state\n  const [carPickupLocation, setCarPickupLocation] = useState('');\n  const [carDropoffLocation, setCarDropoffLocation] = useState('');\n  const [pickupDate, setPickupDate] = useState<Dayjs | null>(dayjs().add(1, 'day'));\n  const [dropoffDate, setDropoffDate] = useState<Dayjs | null>(dayjs().add(3, 'day'));\n  \n  // Restaurant search state\n  const [restaurantLocation, setRestaurantLocation] = useState('');\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setTabValue(newValue);\n  };\n\n  const handleFlightSearch = () => {\n    const searchParams = new URLSearchParams({\n      origin: flightOrigin,\n      destination: flightDestination,\n      departureDate: departureDate?.format('YYYY-MM-DD') || '',\n      returnDate: returnDate?.format('YYYY-MM-DD') || '',\n      passengers: passengers.toString(),\n    });\n    navigate(`/flights?${searchParams.toString()}`);\n  };\n\n  const handleHotelSearch = () => {\n    const searchParams = new URLSearchParams({\n      destination: hotelDestination,\n      checkIn: checkIn?.format('YYYY-MM-DD') || '',\n      checkOut: checkOut?.format('YYYY-MM-DD') || '',\n      guests: guests.toString(),\n      rooms: rooms.toString(),\n    });\n    navigate(`/hotels?${searchParams.toString()}`);\n  };\n\n  const handleCarSearch = () => {\n    const searchParams = new URLSearchParams({\n      pickupLocation: carPickupLocation,\n      dropoffLocation: carDropoffLocation,\n      pickupDate: pickupDate?.format('YYYY-MM-DD') || '',\n      dropoffDate: dropoffDate?.format('YYYY-MM-DD') || '',\n    });\n    navigate(`/cars?${searchParams.toString()}`);\n  };\n\n  const handleRestaurantSearch = () => {\n    const searchParams = new URLSearchParams({\n      location: restaurantLocation,\n    });\n    navigate(`/restaurants?${searchParams.toString()}`);\n  };\n\n  const features = [\n    {\n      icon: <TrendingUp sx={{ fontSize: 40, color: 'primary.main' }} />,\n      title: 'Best Prices',\n      description: 'Compare prices across hundreds of travel sites to find the best deals.',\n    },\n    {\n      icon: <Security sx={{ fontSize: 40, color: 'primary.main' }} />,\n      title: 'Secure Booking',\n      description: 'Your personal and payment information is always protected.',\n    },\n    {\n      icon: <SupportAgent sx={{ fontSize: 40, color: 'primary.main' }} />,\n      title: '24/7 Support',\n      description: 'Get help whenever you need it with our round-the-clock customer service.',\n    },\n  ];\n\n  const popularDestinations = [\n    { name: 'Paris, France', image: '/images/paris.jpg', description: 'City of Light' },\n    { name: 'Tokyo, Japan', image: '/images/tokyo.jpg', description: 'Modern Metropolis' },\n    { name: 'New York, USA', image: '/images/newyork.jpg', description: 'The Big Apple' },\n    { name: 'London, UK', image: '/images/london.jpg', description: 'Historic Capital' },\n  ];\n\n  return (\n    <LocalizationProvider dateAdapter={AdapterDayjs}>\n      <Box>\n        {/* Hero Section */}\n        <Box className=\"hero-section\">\n          <Container maxWidth=\"lg\">\n            <Grid container spacing={4} alignItems=\"center\" sx={{ minHeight: '60vh' }}>\n              <Grid item xs={12} md={6}>\n                <Typography\n                  variant=\"h1\"\n                  sx={{\n                    color: 'white',\n                    fontWeight: 700,\n                    mb: 3,\n                    fontSize: { xs: '2rem', md: '3rem' },\n                  }}\n                >\n                  Your Journey Starts Here\n                </Typography>\n                <Typography\n                  variant=\"h5\"\n                  sx={{\n                    color: 'rgba(255,255,255,0.9)',\n                    mb: 4,\n                    fontWeight: 300,\n                    fontSize: { xs: '1.2rem', md: '1.5rem' },\n                  }}\n                >\n                  Book flights, hotels, cars, and discover amazing restaurants\n                  all in one place\n                </Typography>\n              </Grid>\n            </Grid>\n          </Container>\n        </Box>\n\n        {/* Search Section */}\n        <Container maxWidth=\"lg\">\n          <Paper className=\"search-tabs\" sx={{ mx: 2 }}>\n            <Tabs\n              value={tabValue}\n              onChange={handleTabChange}\n              variant=\"fullWidth\"\n              sx={{\n                borderBottom: 1,\n                borderColor: 'divider',\n                '& .MuiTab-root': {\n                  minHeight: 64,\n                  fontSize: '1rem',\n                },\n              }}\n            >\n              <Tab icon={<Flight />} label=\"Flights\" />\n              <Tab icon={<Hotel />} label=\"Hotels\" />\n              <Tab icon={<DirectionsCar />} label=\"Cars\" />\n              <Tab icon={<Restaurant />} label=\"Restaurants\" />\n            </Tabs>\n\n            {/* Flights Tab */}\n            <TabPanel value={tabValue} index={0}>\n              <Grid container spacing={2} alignItems=\"center\">\n                <Grid item xs={12} md={3}>\n                  <TextField\n                    fullWidth\n                    label=\"From\"\n                    value={flightOrigin}\n                    onChange={(e) => setFlightOrigin(e.target.value)}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <Flight />\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={3}>\n                  <TextField\n                    fullWidth\n                    label=\"To\"\n                    value={flightDestination}\n                    onChange={(e) => setFlightDestination(e.target.value)}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <LocationOn />\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <DatePicker\n                    label=\"Departure\"\n                    value={departureDate}\n                    onChange={setDepartureDate}\n                    slotProps={{ textField: { fullWidth: true } }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <DatePicker\n                    label=\"Return\"\n                    value={returnDate}\n                    onChange={setReturnDate}\n                    slotProps={{ textField: { fullWidth: true } }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Button\n                    variant=\"contained\"\n                    size=\"large\"\n                    fullWidth\n                    onClick={handleFlightSearch}\n                    sx={{ height: 56 }}\n                  >\n                    Search\n                  </Button>\n                </Grid>\n              </Grid>\n            </TabPanel>\n\n            {/* Hotels Tab */}\n            <TabPanel value={tabValue} index={1}>\n              <Grid container spacing={2} alignItems=\"center\">\n                <Grid item xs={12} md={4}>\n                  <TextField\n                    fullWidth\n                    label=\"Destination\"\n                    value={hotelDestination}\n                    onChange={(e) => setHotelDestination(e.target.value)}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <LocationOn />\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <DatePicker\n                    label=\"Check-in\"\n                    value={checkIn}\n                    onChange={setCheckIn}\n                    slotProps={{ textField: { fullWidth: true } }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <DatePicker\n                    label=\"Check-out\"\n                    value={checkOut}\n                    onChange={setCheckOut}\n                    slotProps={{ textField: { fullWidth: true } }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <TextField\n                    fullWidth\n                    type=\"number\"\n                    label=\"Guests\"\n                    value={guests}\n                    onChange={(e) => setGuests(Number(e.target.value))}\n                    inputProps={{ min: 1, max: 20 }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Button\n                    variant=\"contained\"\n                    size=\"large\"\n                    fullWidth\n                    onClick={handleHotelSearch}\n                    sx={{ height: 56 }}\n                  >\n                    Search\n                  </Button>\n                </Grid>\n              </Grid>\n            </TabPanel>\n\n            {/* Cars Tab */}\n            <TabPanel value={tabValue} index={2}>\n              <Grid container spacing={2} alignItems=\"center\">\n                <Grid item xs={12} md={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Pickup Location\"\n                    value={carPickupLocation}\n                    onChange={(e) => setCarPickupLocation(e.target.value)}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <LocationOn />\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={3}>\n                  <TextField\n                    fullWidth\n                    label=\"Drop-off Location\"\n                    value={carDropoffLocation}\n                    onChange={(e) => setCarDropoffLocation(e.target.value)}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <LocationOn />\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <DatePicker\n                    label=\"Pickup Date\"\n                    value={pickupDate}\n                    onChange={setPickupDate}\n                    slotProps={{ textField: { fullWidth: true } }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <DatePicker\n                    label=\"Drop-off Date\"\n                    value={dropoffDate}\n                    onChange={setDropoffDate}\n                    slotProps={{ textField: { fullWidth: true } }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={2}>\n                  <Button\n                    variant=\"contained\"\n                    size=\"large\"\n                    fullWidth\n                    onClick={handleCarSearch}\n                    sx={{ height: 56 }}\n                  >\n                    Search\n                  </Button>\n                </Grid>\n              </Grid>\n            </TabPanel>\n\n            {/* Restaurants Tab */}\n            <TabPanel value={tabValue} index={3}>\n              <Grid container spacing={2} alignItems=\"center\">\n                <Grid item xs={12} md={8}>\n                  <TextField\n                    fullWidth\n                    label=\"Location\"\n                    value={restaurantLocation}\n                    onChange={(e) => setRestaurantLocation(e.target.value)}\n                    InputProps={{\n                      startAdornment: (\n                        <InputAdornment position=\"start\">\n                          <LocationOn />\n                        </InputAdornment>\n                      ),\n                    }}\n                  />\n                </Grid>\n                <Grid item xs={12} md={4}>\n                  <Button\n                    variant=\"contained\"\n                    size=\"large\"\n                    fullWidth\n                    onClick={handleRestaurantSearch}\n                    sx={{ height: 56 }}\n                  >\n                    Search Restaurants\n                  </Button>\n                </Grid>\n              </Grid>\n            </TabPanel>\n          </Paper>\n\n          {/* Features Section */}\n          <Box sx={{ py: 8 }}>\n            <Typography\n              variant=\"h2\"\n              textAlign=\"center\"\n              sx={{ mb: 6, fontWeight: 600 }}\n            >\n              Why Choose TravelBooker?\n            </Typography>\n            <Grid container spacing={4}>\n              {features.map((feature, index) => (\n                <Grid item xs={12} md={4} key={index}>\n                  <Card className=\"feature-card\" sx={{ textAlign: 'center', p: 3 }}>\n                    <CardContent>\n                      <Box sx={{ mb: 2 }}>{feature.icon}</Box>\n                      <Typography variant=\"h5\" sx={{ mb: 2, fontWeight: 600 }}>\n                        {feature.title}\n                      </Typography>\n                      <Typography variant=\"body1\" color=\"text.secondary\">\n                        {feature.description}\n                      </Typography>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              ))}\n            </Grid>\n          </Box>\n\n          {/* Popular Destinations */}\n          <Box sx={{ py: 8 }}>\n            <Typography\n              variant=\"h2\"\n              textAlign=\"center\"\n              sx={{ mb: 6, fontWeight: 600 }}\n            >\n              Popular Destinations\n            </Typography>\n            <Grid container spacing={4}>\n              {popularDestinations.map((destination, index) => (\n                <Grid item xs={12} sm={6} md={3} key={index}>\n                  <Card className=\"feature-card\">\n                    <Box\n                      sx={{\n                        height: 200,\n                        background: `linear-gradient(45deg, ${theme.palette.primary.main}, ${theme.palette.secondary.main})`,\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        color: 'white',\n                      }}\n                    >\n                      <Typography variant=\"h6\" textAlign=\"center\">\n                        {destination.name}\n                      </Typography>\n                    </Box>\n                    <CardContent>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {destination.description}\n                      </Typography>\n                    </CardContent>\n                    <CardActions>\n                      <Button size=\"small\" onClick={() => setHotelDestination(destination.name)}>\n                        Explore\n                      </Button>\n                    </CardActions>\n                  </Card>\n                </Grid>\n              ))}\n            </Grid>\n          </Box>\n        </Container>\n      </Box>\n    </LocalizationProvider>\n  );\n};\n\nexport default HomePage;